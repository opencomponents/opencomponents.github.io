/*! OpenComponents client v1.1.2 | (c) 2015-2017 OpenTable, Inc. | https://github.com/opencomponents/oc-client-browser/tree/master/LICENSES */
!function(e,n){var r=function(e,n){return e instanceof(n||Array)},t=document,o="getElementsByTagName",a="length",c="readyState",i="onreadystatechange",s=t[o]("script"),d=s[s[a]-1],u=d.innerHTML.replace(/^\s+|\s+$/g,"");if(!e.ljs){var l=d.src.match(/checkLoaded/)?1:0,f=t[o]("head")[0]||t.documentElement,p=function(e){var n={};return n.u=e.replace(/#(=)?([^#]*)?/g,function(e,r,t){return n[r?"f":"i"]=t,""}),n},m=function(e,n,r){var o,a=t.createElement(e);r&&(a[c]?a[i]=function(){"loaded"!==a[c]&&"complete"!==a[c]||(a[i]=null,r())}:a.onload=r);for(o in n)n[o]&&(a[o]=n[o]);f.appendChild(a)},h=function(e,n){if(this.aliases&&this.aliases[e]){var t=this.aliases[e].slice(0);return r(t)||(t=[t]),n&&t.push(n),this.load.apply(this,t)}if(r(e)){for(var o=e[a];o--;)this.load(e[o]);return n&&e.push(n),this.load.apply(this,e)}return e.match(/\.css\b/)?this.loadcss(e,n):this.loadjs(e,n)},v={},y={aliases:{},loadjs:function(e,r){var t=p(e);return e=t.u,v[e]===!0?(r&&r(),this):v[e]!==n?(r&&(v[e]=function(e,n){return function(){e&&e(),n&&n()}}(v[e],r)),this):(v[e]=function(n){return function(){v[e]=!0,n&&n()}}(r),r=function(){v[e]()},m("script",{type:"text/javascript",src:e,id:t.i,onerror:function(e){if(t.f){var n=e.currentTarget;n.parentNode.removeChild(n),m("script",{type:"text/javascript",src:t.f,id:t.i},r)}}},r),this)},loadcss:function(e,n){var r=p(e);return e=r.u,v[e]||m("link",{type:"text/css",rel:"stylesheet",href:e,id:r.i}),v[e]=!0,n&&n(),this},load:function(){var e=arguments,t=e[a];return 1===t&&r(e[0],Function)?(e[0](),this):(h.call(this,e[0],t<=1?n:function(){y.load.apply(y,[].slice.call(e,1))}),this)},addAliases:function(e){for(var n in e)this.aliases[n]=r(e[n])?e[n].slice(0):e[n];return this}};if(l){var g,j,b,x;for(g=0,j=s[a];g<j;g++)(x=s[g].getAttribute("src"))&&(v[x.replace(/#.*$/,"")]=!0);for(b=t[o]("link"),g=0,j=b[a];g<j;g++)("stylesheet"===b[g].rel||"text/css"===b[g].type)&&(v[b[g].getAttribute("href").replace(/#.*$/,"")]=!0)}e.ljs=y}d.src&&u&&m("script",{innerHTML:u})}(window);var oc=oc||{};!function(e,n){"function"==typeof define&&define.amd?define(["exports","jquery"],function(r,t){t.extend(r,e.oc),n(e.oc=r,t,e.ljs,e.document,e.window)}):"object"==typeof exports&&"string"!=typeof exports.nodeName?n(exports,require("jquery"),e.ljs,e.document,e.window):n(e.oc=oc,e.$,e.ljs,e.document,e.window)}(this,function(e,n,r,t,o){function a(e){e=Array.isArray(e)?e:[e],e.forEach(function(e){O[e.type]||(O[e.type]={externals:e.externals})})}if(oc.conf=oc.conf||{},oc.cmd=oc.cmd||[],oc.renderedComponents=oc.renderedComponents||{},oc.status=oc.status||!1,oc.status)return oc;oc.status="loading";var c="https://cdnjs.cloudflare.com/ajax/libs/",i=c+"jquery-ajaxtransport-xdomainrequest/1.0.3/jquery.xdomainrequest.min.js",s=c+"jquery/1.11.2/jquery.min.js",d=oc.conf.retryInterval||5e3,u=oc.conf.retryLimit||30,l=oc.conf.retrySendNumber||!0,f=oc.conf.pollingInterval||500,p=oc.conf.tag||"oc-component",m="Href parameter missing",h="Failed to load {0} component {1} times. Giving up".replace("{1}",u),v="Error getting compiled view: {0}",y="Error getting data",g="Error rendering component: {0}, error: {1}",j="Failed to retrieve the component. Retrying in {0} seconds...".replace("{0}",d/1e3),b='Error loading component: view engine "{0}" not supported',x=oc.conf.loadingMessage||"",q="Component '{0}' correctly rendered",$="Unrendered component found. Trying to retrieve it...",C=function(e,n){if(!n)throw e+" parameter is required"},w=oc.conf.debug||!1,E=function(){},T=o.navigator.userAgent,U=!!T.match(/MSIE 9/),A=!1,M=!1,k={},H=function(e){return"boolean"==typeof e},L={error:function(e){return console.log(e)},info:function(e){return!!w&&console.log(e)}},O={"oc-template-handlebars":{externals:[{global:"Handlebars",url:"https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.6/handlebars.runtime.min.js"}]},"oc-template-jade":{externals:[{global:"jade",url:"https://cdnjs.cloudflare.com/ajax/libs/jade/1.11.0/runtime.min.js"}]}};oc.conf.templates&&a(oc.conf.templates);var N=function(e,n,r){return void 0===k[e]&&(k[e]=u),k[e]<=0?r():(setTimeout(function(){n(u-k[e]+1)},d),void k[e]--)},I=function(e,n){if(e&&n){var r=oc.$.param(n);return e.indexOf("?")>-1?e+"&"+r:e+"?"+r}return e};oc.registerTemplates=function(e){return a(e),oc.ready(oc.renderUnloadedComponents),O},oc.require=function(e,n,t){"function"==typeof n&&(t=n,n=e,e=void 0),"string"==typeof e&&(e=[e]);var a=function(){var n=o;if("undefined"==typeof e)return!0;for(var r=0;r<e.length;r++)if(n=n[e[r]],!n)return!0;return!1},c=function(){var n=o;if("undefined"!=typeof e){for(var r=0;r<e.length;r++)if(n=n[e[r]],!n)return;return n}};a()?r.load(n,function(){t(c())}):t(c())};var S=function(e,n,r){if("function"==typeof n&&(r=n,n=[]),0===e.length)return r();var t=e[0];oc.require(t.global,t.url,function(){var o=t,a=n.concat(o),c=e.slice(1);S(c,a,r)})};oc.requireSeries=S;var D=function(e,n,r){n.id=Math.floor(9999999999*Math.random()),e.html(n.html),e.attr("id",n.id),e.attr("data-rendered",!0),e.attr("data-rendering",!1),e.attr("data-version",n.version),n.key&&e.attr("data-hash",n.key),n.name&&(e.attr("data-name",n.name),oc.renderedComponents[n.name]=n.version,oc.events.fire("oc:rendered",n)),r()};oc.getData=function(e,n){n=n||E,C("version",e.version),C("baseUrl",e.baseUrl),C("name",e.name),oc.$.ajax({method:"POST",url:e.baseUrl,data:{components:[{name:e.name,version:e.version,parameters:e.parameters}]},headers:{Accept:"application/vnd.oc.unrendered+json"},contentType:"text/plain",crossDomain:!0,success:function(e){return"rendered"===e.renderMode?n(y):n(null,e.data,e)},error:function(e){return n(e)}})},oc.build=function(e){C("baseUrl",e.baseUrl),C("name",e.name);var n=function(e){return e=e||"","/"!==e.slice(-1)&&(e+="/"),e},r=n(e.baseUrl)+n(e.name);if(e.version&&(r+=n(e.version)),e.parameters){r+="?";for(var t in e.parameters)e.parameters.hasOwnProperty(t)&&(r+=t+"="+e.parameters[t]+"&");r=r.slice(0,-1)}return"<"+p+' href="'+r+'"></'+p+">"},oc.events={},oc.ready=function(e){if(A)return e();if(M)oc.cmd.push(e);else{M=!0;var n=function(e,n){U&&!e.IE_POLYFILL_LOADED?oc.require(i,n):n()},r=function(){A=!0,M=!1,oc.events=function(){var e=oc.$({});return{fire:function(n,r){return e.trigger(n,r)},on:function(n,r){return e.on(n,r||E)},reset:function(){return e.off()}}}(),e(),oc.events.fire("oc:ready",oc),oc.status="ready";for(var n=0;n<oc.cmd.length;n++)oc.cmd[n](oc);oc.cmd={push:function(e){e(oc)}}},t=!!o.jQuery,a=!!o.$;oc.require("jQuery",s,function(e){n(e,function(){t||a?oc.$=e:oc.$=e.noConflict(),r()})})}},oc.render=function(e,n,r){oc.ready(function(){var t=e.type;"jade"===t&&(t="oc-template-jade"),"handlebars"===t&&(t="oc-template-handlebars");var a=O[t];a?oc.require(["oc","components",e.key],e.src,function(c){c?S(a.externals,function(){if("oc-template-handlebars"===t)try{var e=o.Handlebars.template(c,[]);r(null,e(n))}catch(a){r(a.toString())}else r(null,c(n))}):r(v.replace("{0}",e.src))}):r(b.replace("{0}",e.type))})},oc.renderNestedComponent=function(e,n){oc.ready(function(){var r=e.attr("data-rendering"),t=e.attr("data-rendered"),o=H(r)?r:"true"===r,a=H(t)?t:"true"===t;o||a?setTimeout(n,f):(L.info($),e.attr("data-rendering",!0),e.html('<div class="oc-loading">'+x+"</div>"),oc.renderByHref(e.attr("href"),function(r,t){return r||!t?(e.html(""),L.error(r),n()):void D(e,t,n)}))})},oc.renderByHref=function(e,n,r){var t=r,o=n;"function"==typeof n&&(t=n,o=0),oc.ready(function(){if(""===e)return t(g.replace("{1}",m));var n=e;l&&(n=I(n,{__oc_Retry:o})),oc.$.ajax({url:n,headers:{Accept:"application/vnd.oc.unrendered+json"},contentType:"text/plain",crossDomain:!0,success:function(e){if("unrendered"===e.renderMode)oc.render(e.template,e.data,function(n,r){return n?t(g.replace("{0}",e.href).replace("{1}",n)):(L.info(q.replace("{0}",e.template.src)),void t(null,{html:r,key:e.template.key,version:e.version,name:e.name}))});else if("rendered"===e.renderMode){if(L.info(q.replace("{0}",e.href)),0===e.html.indexOf("<"+p)){var n=e.html.slice(e.html.indexOf(">")+1),r=n.slice(0,n.lastIndexOf("<"));e.html=r}t(null,{html:e.html,version:e.version,name:e.name})}},error:function(){L.error(j),N(e,function(n){oc.renderByHref(e,n,t)},function(){t(h.replace("{0}",e))})}})})},oc.renderUnloadedComponents=function(){oc.ready(function(){var e=oc.$(p+"[data-rendered!=true]"),n=e.length,r=function(){n--,n||oc.renderUnloadedComponents()};if(n>0)for(var t=0;t<e.length;t++)oc.renderNestedComponent(oc.$(e[t]),r)})},oc.load=function(e,n,r){oc.ready(function(){if("function"!=typeof r&&(r=E),oc.$(e)){oc.$(e).html("<"+p+' href="'+n+'" />');var t=oc.$(p,e);oc.renderNestedComponent(t,function(){r(t)})}})},oc.ready(oc.renderUnloadedComponents),e=oc}),oc.clientVersion="1.1.2";
//# sourceMappingURL=oc-client.min.map