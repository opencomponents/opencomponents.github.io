"use strict";(self.webpackChunkoc_website=self.webpackChunkoc_website||[]).push([[6787],{5923:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"consumers/client-setup","title":"OC Client \u2013 Installation & Setup","description":"oc-client is the browser runtime that discovers `` tags and renders them. This page explains how to include the script, initialise it safely, and configure global settings.","source":"@site/docs/consumers/client-setup.md","sourceDirName":"consumers","slug":"/consumers/client-setup","permalink":"/docs/consumers/client-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/opencomponents/opencomponents.github.io/tree/master/website/docs/consumers/client-setup.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Debugging","permalink":"/docs/building/debugging"},"next":{"title":"OC Client API & Advanced Usage","permalink":"/docs/consumers/client-api"}}');var i=t(4848),r=t(8453);const c={sidebar_position:2},d="OC Client \u2013 Installation & Setup",l={},o=[{value:"Including the script",id:"including-the-script",level:2},{value:"Safe initialisation pattern",id:"safe-initialisation-pattern",level:2},{value:"Configuration reference",id:"configuration-reference",level:2},{value:"All options",id:"all-options",level:3},{value:"Template configuration example",id:"template-configuration-example",level:3}];function a(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"oc-client--installation--setup",children:"OC Client \u2013 Installation & Setup"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"oc-client"})," is the browser runtime that discovers ",(0,i.jsx)(n.code,{children:"<oc-component>"})," tags and renders them. This page explains how to include the script, initialise it safely, and configure global settings."]}),"\n",(0,i.jsx)(n.h2,{id:"including-the-script",children:"Including the script"}),"\n",(0,i.jsx)(n.p,{children:"The client is itself an OC component served by every registry. Load it with a protocol-relative URL so that it automatically uses HTTP or HTTPS depending on your site:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'\x3c!-- Always served at the same version as your registry --\x3e\n<script src="//your-registry.company.com/oc-client/client.js"><\/script>\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best practice:"})," Place the tag just before the closing ",(0,i.jsx)(n.code,{children:"</body>"}),". On load the client scans the DOM and immediately calls ",(0,i.jsx)(n.code,{children:"oc.renderUnloadedComponents()"}),". If you inject the script ",(0,i.jsx)(n.em,{children:"before"})," your components, simply call that function yourself once the client is ready."]}),"\n",(0,i.jsx)(n.h2,{id:"safe-initialisation-pattern",children:"Safe initialisation pattern"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'window.oc = window.oc || {};\noc.cmd = oc.cmd || [];\noc.cmd.push(function (oc) {\n  // This runs after the client is fully ready\n  console.log("OC version:", oc.clientVersion);\n});\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"cmd"})," queue whenever you\u2019re not sure if the script has finished loading yet (for example in single-page apps or when dynamically injecting the client)."]}),"\n",(0,i.jsx)(n.h2,{id:"configuration-reference",children:"Configuration reference"}),"\n",(0,i.jsxs)(n.p,{children:["Expose the ",(0,i.jsx)(n.code,{children:"conf"})," object ",(0,i.jsx)(n.em,{children:"before"})," the script tag to override defaults:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'<script>\n  var oc = {\n    conf: {\n      debug: true,\n      retryInterval: 2000,\n      globalParameters: { userId: "123" },\n    },\n  };\n<\/script>\n<script src="//your-registry.company.com/oc-client/client.js"><\/script>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"all-options",children:"All options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Key"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"debug"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"boolean"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Console logging for troubleshooting"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"disableLifecycles"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"boolean"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Turn off automatic lifecycle handling"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"disableLoader"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"boolean"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Hide the loading message"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"globalHeaders"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"object | function"})}),(0,i.jsx)(n.td,{children:"\u2013"}),(0,i.jsx)(n.td,{children:"Headers to include on every request"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"globalParameters"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"object"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"{}"})}),(0,i.jsx)(n.td,{children:"Query-string params added to every component"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"loadingMessage"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'""'})}),(0,i.jsx)(n.td,{children:"Text displayed while fetching"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"pollingInterval"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"number"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"500"})}),(0,i.jsx)(n.td,{children:"Interval (ms) for status checks"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"retryInterval"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"number"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"5000"})}),(0,i.jsx)(n.td,{children:"Wait time (ms) between retries"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"retryLimit"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"number"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"30"})}),(0,i.jsx)(n.td,{children:"Max retries before giving up"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"retrySendNumber"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"boolean"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsxs)(n.td,{children:["Append ",(0,i.jsx)(n.code,{children:"__ocRetry"})," counter to requests"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tag"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"oc-component"})}),(0,i.jsx)(n.td,{children:"Custom element name"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"templates"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"array"})}),(0,i.jsx)(n.td,{children:"ES6 & common legacy templates"}),(0,i.jsx)(n.td,{children:"Template definitions for client-side rendering"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"template-configuration-example",children:"Template configuration example"}),"\n",(0,i.jsxs)(n.p,{children:["Modern components built with ES6 templates need no extra configuration. Legacy templates ",(0,i.jsx)(n.em,{children:"do"})," require runtimes:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'var oc = {\n  conf: {\n    templates: [\n      {\n        type: "oc-template-handlebars",\n        externals: [\n          {\n            global: "Handlebars",\n            url: "https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.runtime.min.js",\n          },\n        ],\n      },\n    ],\n  },\n};\n'})}),"\n",(0,i.jsxs)(n.p,{children:["That\u2019s it! Continue with ",(0,i.jsx)(n.a,{href:"/docs/consumers/client-api",children:"OC Client API"})," for day-to-day usage or jump to ",(0,i.jsx)(n.a,{href:"/docs/consumers/rendering-lifecycle",children:"Rendering Lifecycle"})," to understand what happens in the browser."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>d});var s=t(6540);const i={},r=s.createContext(i);function c(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);