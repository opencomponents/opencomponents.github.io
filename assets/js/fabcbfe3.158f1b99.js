"use strict";(self.webpackChunkoc_website=self.webpackChunkoc_website||[]).push([[2561],{8453:(e,n,o)=>{o.d(n,{R:()=>c,x:()=>i});var r=o(6540);const t={},s=r.createContext(t);function c(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),r.createElement(s.Provider,{value:n},e.children)}},9223:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"consumers/rendering-lifecycle","title":"Rendering Lifecycle","description":"Learn how the OC client discovers and renders components on the page \u2013 including synchronous, asynchronous and nested rendering, plus support for ES modules. If you\u2019re looking for an architectural birds-eye view of what happens in the browser, you\u2019re in the right place.","source":"@site/docs/consumers/rendering-lifecycle.md","sourceDirName":"consumers","slug":"/consumers/rendering-lifecycle","permalink":"/docs/consumers/rendering-lifecycle","draft":false,"unlisted":false,"editUrl":"https://github.com/opencomponents/opencomponents.github.io/tree/master/website/docs/consumers/rendering-lifecycle.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"OC Client API & Advanced Usage","permalink":"/docs/consumers/client-api"},"next":{"title":"Events & Hooks","permalink":"/docs/consumers/events-hooks"}}');var t=o(4848),s=o(8453);const c={sidebar_position:3},i="Rendering Lifecycle",d={},a=[{value:"Rendering Components",id:"rendering-components",level:2},{value:"Synchronous Rendering",id:"synchronous-rendering",level:3},{value:"Asynchronous Rendering",id:"asynchronous-rendering",level:3},{value:"Nested Component Rendering",id:"nested-component-rendering",level:3},{value:"ESM (ES Module) Support",id:"esm-es-module-support",level:3},{value:"Render Flow Diagram",id:"render-flow-diagram",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",mermaid:"mermaid",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"rendering-lifecycle",children:"Rendering Lifecycle"})}),"\n",(0,t.jsx)(n.p,{children:"Learn how the OC client discovers and renders components on the page \u2013 including synchronous, asynchronous and nested rendering, plus support for ES modules. If you\u2019re looking for an architectural birds-eye view of what happens in the browser, you\u2019re in the right place."}),"\n",(0,t.jsx)(n.h2,{id:"rendering-components",children:"Rendering Components"}),"\n",(0,t.jsx)(n.h3,{id:"synchronous-rendering",children:"Synchronous Rendering"}),"\n",(0,t.jsx)(n.p,{children:"Components render automatically when the page loads:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<oc-component href="//registry.com/header/1.0.0"></oc-component>\n<oc-component href="//registry.com/footer/1.0.0"></oc-component>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"asynchronous-rendering",children:"Asynchronous Rendering"}),"\n",(0,t.jsx)(n.p,{children:"Render components programmatically:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'oc.ready(function () {\n  const container = document.getElementById("async-content");\n  container.innerHTML = oc.build({\n    baseUrl: "//registry.com",\n    name: "dynamic-widget",\n    version: "2.1.0",\n    parameters: { theme: "blue" },\n  });\n  oc.renderUnloadedComponents();\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"nested-component-rendering",children:"Nested Component Rendering"}),"\n",(0,t.jsx)(n.p,{children:"Handle components within components:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'oc.events.on("oc:rendered", function (event, data) {\n  if (data.name === "parent-component") {\n    // Parent rendered, now render nested components\n    const nestedComponents = data.element.querySelectorAll("oc-component");\n    nestedComponents.forEach(function (component) {\n      oc.renderNestedComponent(component, function () {\n        console.log("Nested component rendered");\n      });\n    });\n  }\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"esm-es-module-support",children:"ESM (ES Module) Support"}),"\n",(0,t.jsx)(n.p,{children:"Modern components using ES modules are automatically detected and rendered:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<oc-component href="//registry.com/modern-component/3.0.0"></oc-component>\n'})}),"\n",(0,t.jsxs)(n.p,{children:["ESM components expose a ",(0,t.jsx)(n.code,{children:"mount"})," function and receive props directly."]}),"\n",(0,t.jsx)(n.h2,{id:"render-flow-diagram",children:"Render Flow Diagram"}),"\n",(0,t.jsx)(n.mermaid,{value:"graph TD\nA[Page Load] --\x3e B[OC Client Script Loaded]\nB --\x3e C[Client Initialization]\nC --\x3e D[Fire oc:ready Event]\nD --\x3e E[Scan DOM for oc-component Tags]\nE --\x3e F{Component Found?}\nF --\x3e|Yes| G[Set data-rendering=true]\nF --\x3e|No| Z[Complete]\nG --\x3e H[Show Loading Message]\nH --\x3e I[Fetch Component from Registry]\nI --\x3e J{Fetch Success?}\nJ --\x3e|No| K[Retry Logic]\nK --\x3e L{Retry Limit Reached?}\nL --\x3e|No| M[Wait Retry Interval]\nM --\x3e I\nL --\x3e|Yes| N[Fire oc:failed Event]\nN --\x3e O[Set data-failed=true]\nO --\x3e P[Clear Loading Message]\nP --\x3e E\nJ --\x3e|Yes| Q[Load Template Externals]\nQ --\x3e R[Render Component HTML]\nR --\x3e S{Render Success?}\nS --\x3e|No| N\nS --\x3e|Yes| T[Inject HTML into DOM]\nT --\x3e U[Set data-rendered=true]\nT --\x3e V[Fire oc:rendered Event]\nV --\x3e W{ESM Component?}\nW --\x3e|Yes| X[Call mount function]\nW --\x3e|No| Y[Reactivate Scripts]\nX --\x3e E\nY --\x3e E\n\nstyle A fill:#e1f5fe\nstyle D fill:#c8e6c9\nstyle N fill:#ffcdd2\nstyle V fill:#c8e6c9\nstyle Z fill:#e8f5e8"})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);